on:
  pull_request:
    branches:
      - main
    types: [closed]
    name: ðŸš€ Deploy website on push
    jobs:
      web-deploy:
        name: ðŸŽ‰ Deploy to Live
        if: ${{ github.ref == 'refs/heads/live' }}
        runs-on: ubuntu-latest
        steps:
          - name: ðŸšš Get latest code
            uses: actions/checkout@v3

          - name: ðŸ“‚ Sync files
            uses: SamKirkland/FTP-Deploy-Action@4.3.3
            with:
              server: ${{ secrets.ftp_server }}
              username: ${{ secrets.ftp_user }}
              password: ${{ secrets.ftp_password }}
              local-dir: ./web/

  on:
    pull_request:
      branches:
        - dev
      types: [ closed ]
      name: ðŸš€ Deploy website on push
      jobs:
      web-deploy-dev:
        name: ðŸŽ‰ Deploy to Dev
        if: ${{ github.ref == 'refs/heads/dev' }}
        runs-on: ubuntu-latest
        steps:
          - name: ðŸšš Get latest code
            uses: actions/checkout@v3

          - name: ðŸ“‚ Sync files
            uses: SamKirkland/FTP-Deploy-Action@4.3.3
            with:
              server: ${{ secrets.ftp_server }}
              username: ${{ secrets.ftp_user_dev }}
              password: ${{ secrets.ftp_password_dev }}
              local-dir: ./web/